<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>

    <!-- google -->
    <meta name="google-signin-client_id" content="884197039867-4r7hcu2d6uqe1angl7978r60hk6mtitc.apps.googleusercontent.com">
    <script type="text/javascript">
      function onSignIn(googleUser){
        console.log('apiLogined');
        var profile = googleUser.getBasicProfile();
        var nameTxt = document.querySelector('#name');
        console.log('Name: ' + profile.getName());
        nameTxt.innerHTML = 'Welcom <strong>'+profile.getName()+'</strong>';
      }

      function checkLoginStatus(){
        var loginBtn = document.querySelector('#loginBtn');
        if(gauth.isSignedIn.get()){
          console.log('logined');
          loginBtn.value = 'Logout';
        } else{
          console.log('logouted');
          loginBtn.value = 'Login';
        }
      }
      function init() {
          gapi.load('auth2', function() {
            window.gauth =  gapi.auth2.init({
            client_id: '884197039867-4r7hcu2d6uqe1angl7978r60hk6mtitc.apps.googleusercontent.com'
            })
            gauth.then(function(){
              console.log('googleAuth success');
              checkLoginStatus();
            }, function(){
              console.log('googleAuth fall');
            })
          });
        }
    </script>


    <!-- google END -->
  </head>
  <body>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
    <<span id="name"></span>
    <input type="button" id="loginBtn" value="checking..." onclick="
      if(this.value === 'Login'){
        gauth.signIn().then(function(){
          console.log('gauth.sighIn()');
          checkLoginStatus();
        });
      }else {
        gauth.signOut().then(function(){
          console.log('gauth.signOut()');
          checkLoginStatus();
        });
      }
    ">
    <script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>
  </body>
</html>
